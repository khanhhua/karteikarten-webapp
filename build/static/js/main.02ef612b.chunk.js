(this["webpackJsonpkarteikarten-webapp"]=this["webpackJsonpkarteikarten-webapp"]||[]).push([[0],{41:function(e,t,n){},60:function(e,t,n){e.exports=n(85)},65:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(24),o=n.n(r),l=(n(65),n(48)),s=n(49),i=n(58),u=n(50),d=n(59),m=(n(41),n(13)),p=n(17),f=(n(70),n(19)),b=Object(f.a)(),v=n(21),E=n(56),h=n(11),O=n(9),j={loggedIn:!1},x={newCollection:null,newCard:null,editCollection:null,collections:[]},k={reviewCollection:null,cardIndex:0,scorecards:[]},w={busy:!1,error:null},g=Object(v.c)({routing:h.routerReducer,network:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;return"pending"===t.status?Object(O.a)({},e,{busy:!0}):"error"===t.status?Object(O.a)({},e,{busy:!1,error:t.error}):"success"===t.status?Object(O.a)({},e,{error:null,busy:!1}):w},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;if("pending"===t.status)return e;switch(t.type){case"login":return"success"===t.status?(localStorage.setItem("access_token",t.accessToken),Object(O.a)({},e,{loggedIn:!0})):(localStorage.removeItem("access_token"),Object(O.a)({},e,{loggedIn:!1}));default:return e}},coreData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;if("pending"===t.status)return e;switch(t.type){case"create-collection":return"success"===t.status?Object(O.a)({},e,{newCollection:Object(O.a)({},t.collection,{items:[]})}):e;case"create-card-in-new-collection":return"success"===t.status&&e.newCollection&&t.collection.id===e.newCollection.id?Object(O.a)({},e,{newCollection:Object(O.a)({},e.newCollection,{item_ids:e.newCollection.item_ids.concat(t.card.id),items:e.newCollection.items.concat(t.card)}),newCard:t.card}):e;case"update-card-in-collection":if("success"===t.status){var n=Object(O.a)({},t.collection,{items:t.collection.items.map((function(e){return e.id===t.card.id?t.card:e}))});return Object(O.a)({},e,{editCollection:n})}return e;case"fetch-collections":case"fetch-recent-collections":return"success"===t.status?Object(O.a)({},e,{collections:t.collections}):e;case"view-collection":return"success"===t.status?Object(O.a)({},e,{editCollection:Object(O.a)({},t.collection)}):e;default:return e}},review:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;if("pending"===t.status)return e;switch(t.type){case"review-collection":return"success"===t.status?Object(O.a)({},e,{scorecards:[],reviewCollection:Object(O.a)({},t.collection),cardIndex:t.cardIndex,complete:!1}):e;case"review-card":return"success"===t.status?Object(O.a)({},e,{cardIndex:t.cardIndex}):e;case"answer-match":return"success"===t.status?Object(O.a)({},e,{scorecards:e.scorecards.concat(t.scorecard)}):e;case"review-result":return"success"===t.status?Object(O.a)({},e,{complete:!0}):e;default:return e}}}),y=n(10),C=n.n(y),N=n(5);function I(e,t){var n,c,a,r=arguments;return C.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:null,c=localStorage.getItem("access_token"),o.next=4,C.a.awrap(fetch(e,{method:t,headers:Object(O.a)({"Content-Type":"application/json"},c?{Authorization:"Bearer ".concat(c)}:{}),body:n&&JSON.stringify(n)}));case 4:if(!((a=o.sent).status<500)){o.next=9;break}return o.abrupt("return",a.json());case 9:return o.abrupt("return",a.text());case 10:case"end":return o.stop()}}))}function _(e){return C.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",I(e,"get"));case 1:case"end":return t.stop()}}))}var S=function(e){return{post:function(t,n){return function(e,t){return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",I(e,"post",t));case 1:case"end":return n.stop()}}))}("".concat(e).concat(t),n)},patch:function(t,n){return function(e,t){return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",I(e,"patch",t));case 1:case"end":return n.stop()}}))}("".concat(e).concat(t),n)},get:function(t){return _("".concat(e).concat(t))}}},L=C.a.mark(D),M=C.a.mark(F),P=S("https://karteikarten-263719.appspot.com").post;function D(e){var t,n;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.authData,c.next=3,P("/auth/register",{id_token:t.tokenId});case 3:if((n=c.sent).ok){c.next=9;break}return c.next=7,Object(N.b)({type:"login",status:"error",error:n.error});case 7:c.next=13;break;case 9:return c.next=11,Object(N.b)({type:"login",status:"success",accessToken:n.access_token});case 11:return c.next=13,Object(N.b)(Object(h.replace)("/"));case 13:case"end":return c.stop()}}),L)}function F(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)((function(e){var t=e.type,n=e.status;return"login"===t&&"pending"===n}),D);case 2:case"end":return e.stop()}}),M)}var R=n(29),z=C.a.mark(Q),A=C.a.mark(Z),T=C.a.mark(ee),B=C.a.mark(te),V=C.a.mark(ne),W=C.a.mark(ce),Y=C.a.mark(ae),J=C.a.mark(re),K=C.a.mark(oe),X=C.a.mark(le),H=C.a.mark(se),U=S("https://karteikarten-263719.appspot.com"),$=U.get,q=U.patch,G=U.post;function Q(e){var t,n;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.collection,c.next=3,G("/collections",t);case 3:if((n=c.sent).ok){c.next=9;break}return c.next=7,Object(N.b)({type:"create-collection",status:"error",error:n.error});case 7:c.next=13;break;case 9:return c.next=11,Object(N.b)({type:"create-collection",status:"success",collection:n.collection});case 11:return c.next=13,Object(N.b)(Object(h.replace)("/create-collection/step-1"));case 13:case"end":return c.stop()}}),z)}function Z(e){var t,n,c,a,r;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.type,n=e.collection,c=e.card,o.next=3,G("/cards",c);case 3:if((a=o.sent).ok){o.next=8;break}return o.next=7,Object(N.b)({type:t,status:"error",error:a.error});case 7:return o.abrupt("return");case 8:return o.next=10,q("/collections/".concat(n.id),{item_ids:n.item_ids.concat(a.card.id)});case 10:if(r=o.sent,a.ok){o.next=15;break}return o.next=14,Object(N.b)({type:t,status:"error",error:r.error});case 14:return o.abrupt("return");case 15:if("create-card-in-new-collection"!==t){o.next=20;break}return o.next=18,Object(N.b)({type:t,status:"success",collection:r.collection,card:a.card});case 18:o.next=22;break;case 20:return o.next=22,ne({collectionId:r.collection.id});case 22:case"end":return o.stop()}}),A)}function ee(e){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("/collections?features=stats");case 2:if((t=e.sent).ok){e.next=7;break}return e.next=6,Object(N.b)({type:"fetch-collections",status:"error",error:t.error});case 6:return e.abrupt("return");case 7:return e.next=9,Object(N.b)({type:"fetch-collections",status:"success",collections:t.collections});case 9:case"end":return e.stop()}}),T)}function te(e){var t,n;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.type,c.next=3,$("/collections/recent?features=stats");case 3:if((n=c.sent).ok){c.next=8;break}return c.next=7,Object(N.b)({type:t,status:"error",error:n.error});case 7:return c.abrupt("return");case 8:return c.next=10,Object(N.b)({type:t,status:"success",collections:n.collections});case 10:case"end":return c.stop()}}),B)}function ne(e){var t,n;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.collectionId,c.next=3,$("/collections/".concat(t));case 3:if((n=c.sent).ok){c.next=8;break}return c.next=7,Object(N.b)({type:"view-collection",status:"error",error:n.error});case 7:return c.abrupt("return");case 8:return c.next=10,Object(N.b)({type:"view-collection",status:"success",collection:n.collection});case 10:case"end":return c.stop()}}),V)}function ce(e){var t,n,c,a;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.collection,n=t.id,c=Object(R.a)(t,["id"]),r.next=3,q("/collections/".concat(n),c);case 3:if((a=r.sent).ok){r.next=8;break}return r.next=7,Object(N.b)({type:"update-collection",status:"error",error:a.error});case 7:return r.abrupt("return");case 8:return r.next=10,Object(N.b)({type:"update-collection",status:"success",collection:a.collection});case 10:case"end":return r.stop()}}),W)}function ae(e){var t,n,c,a,r,o;return C.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.type,n=e.collection,c=e.card,a=c.id,r=Object(R.a)(c,["id"]),l.next=3,q("/cards/".concat(a),r);case 3:if((o=l.sent).ok){l.next=8;break}return l.next=7,Object(N.b)({type:t,status:"error",error:o.error});case 7:return l.abrupt("return");case 8:return l.next=10,Object(N.b)({type:t,status:"success",collection:n,card:o.card});case 10:case"end":return l.stop()}}),Y)}function re(e){var t,n,c,a,r,o,l;return C.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.type,n=e.cardId,c=e.toCollectionId,s.next=3,Object(N.c)((function(e){return e.coreData.editCollection.id}));case 3:return a=s.sent,s.next=6,$("/collections/".concat(c));case 6:if(r=s.sent,o=r.collection){s.next=12;break}return s.next=11,Object(N.b)({type:"copy-card",status:"error",error:"Collection not found"});case 11:return s.abrupt("return");case 12:return s.next=14,q("/collections/".concat(c),Object(O.a)({},o,{item_ids:o.item_ids.concat(n)}));case 14:if((l=s.sent).ok){s.next=19;break}return s.next=18,Object(N.b)({type:"copy-card",status:"error",error:l.error});case 18:return s.abrupt("return");case 19:return s.next=21,Object(N.b)({type:t,status:"success",collection:l.collection});case 21:return s.next=23,ne({collectionId:a});case 23:case"end":return s.stop()}}),J)}function oe(e){var t,n,c,a,r,o,l,s,i,u,d;return C.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.type,n=e.cardId,c=e.toCollectionId,m.next=3,$("/cards/".concat(n));case 3:if(a=m.sent,r=a.card){m.next=9;break}return m.next=8,Object(N.b)({type:"clone-card",status:"error",error:"Card not found"});case 8:return m.abrupt("return");case 9:return m.next=11,G("/cards",{front:r.front,back:r.back});case 11:if(o=m.sent,l=o.card,s=(l=void 0===l?{}:l).id){m.next=19;break}return m.next=18,Object(N.b)({type:"clone-card",status:"error",error:"Card not found"});case 18:return m.abrupt("return");case 19:return m.next=21,$("/collections/".concat(c));case 21:if(i=m.sent,u=i.collection){m.next=27;break}return m.next=26,Object(N.b)({type:"clone-card",status:"error",error:"Collection not found"});case 26:return m.abrupt("return");case 27:return m.next=29,q("/collections/".concat(c),Object(O.a)({},u,{item_ids:u.item_ids.map((function(e){return e===n?s:e}))}));case 29:if((d=m.sent).ok){m.next=34;break}return m.next=33,Object(N.b)({type:"clone-card",status:"error",error:d.error});case 33:return m.abrupt("return");case 34:return m.next=36,Object(N.b)({type:t,status:"success",collection:d.collection});case 36:return m.next=38,ne({collectionId:c});case 38:case"end":return m.stop()}}),K)}function le(e){var t,n,c,a,r,o,l,s,i,u;return C.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.type,n=e.cardId,c=e.fromCollectionId,a=e.toCollectionId,d.next=3,$("/collections/".concat(c));case 3:if(r=d.sent,o=r.collection){d.next=9;break}return d.next=8,Object(N.b)({type:"move-card",status:"error",error:"Collection not found"});case 8:return d.abrupt("return");case 9:return d.next=11,$("/collections/".concat(a));case 11:if(l=d.sent,s=l.collection){d.next=17;break}return d.next=16,Object(N.b)({type:"move-card",status:"error",error:"Collection not found"});case 16:return d.abrupt("return");case 17:return d.next=19,q("/collections/".concat(c),Object(O.a)({},o,{item_ids:o.item_ids.filter((function(e){return e!==n}))}));case 19:if((i=d.sent).ok){d.next=24;break}return d.next=23,Object(N.b)({type:"copy-card",status:"error",error:i.error});case 23:return d.abrupt("return");case 24:return d.next=26,q("/collections/".concat(a),Object(O.a)({},s,{item_ids:s.item_ids.concat(n)}));case 26:if((u=d.sent).ok){d.next=31;break}return d.next=30,Object(N.b)({type:"copy-card",status:"error",error:u.error});case 30:return d.abrupt("return");case 31:return d.next=33,Object(N.b)({type:t,status:"success"});case 33:return d.next=35,ne({collectionId:c});case 35:case"end":return d.stop()}}),X)}function se(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)((function(e){var t=e.type,n=e.status;return"create-collection"===t&&"pending"===n}),Q);case 2:return e.next=4,Object(N.d)((function(e){var t=e.type,n=e.status;return("create-card-in-new-collection"===t||"create-card-in-collection"===t)&&"pending"===n}),Z);case 4:return e.next=6,Object(N.d)((function(e){var t=e.type,n=e.status;return"update-card-in-collection"===t&&"pending"===n}),ae);case 6:return e.next=8,Object(N.d)((function(e){var t=e.type,n=e.status;return"fetch-collections"===t&&"pending"===n}),ee);case 8:return e.next=10,Object(N.d)((function(e){var t=e.type,n=e.status;return"fetch-recent-collections"===t&&"pending"===n}),te);case 10:return e.next=12,Object(N.d)((function(e){var t=e.type,n=e.status;return"view-collection"===t&&"pending"===n}),ne);case 12:return e.next=14,Object(N.d)((function(e){var t=e.type,n=e.status;return"update-collection"===t&&"pending"===n}),ce);case 14:return e.next=16,Object(N.d)((function(e){var t=e.type,n=e.status;return"copy-card"===t&&"pending"===n}),re);case 16:return e.next=18,Object(N.d)((function(e){var t=e.type,n=e.status;return"move-card"===t&&"pending"===n}),le);case 18:return e.next=20,Object(N.d)((function(e){var t=e.type,n=e.status;return"clone-card"===t&&"pending"===n}),oe);case 20:case"end":return e.stop()}}),H)}var ie=n(15),ue=n(57),de=C.a.mark(Ee),me=C.a.mark(he),pe=C.a.mark(Oe),fe=S("https://karteikarten-263719.appspot.com"),be=fe.get,ve=fe.patch;function Ee(e){var t,n,c,a;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.collectionId,r.next=3,be("/collections/".concat(t));case 3:if((n=r.sent).ok){r.next=8;break}return r.next=7,Object(N.b)({type:"review-collection",status:"error",error:n.error});case 7:return r.abrupt("return");case 8:return r.next=10,ve("/me/recent-collections",{collection_id:t});case 10:return(c=n.collection.items).sort((function(){return Math.round(2*Math.random()-1)})),a=c.map((function(e){var t=Object(ue.a)(c),n=new Array(Math.min(t.length-1,3)).fill(0).map((function(){var n;do{var c=t.length,a=t.splice(Math.floor(Math.random()*c),1);n=Object(ie.a)(a,1)[0]}while(n.id===e.id);return n}));return n.splice(Math.floor(3*Math.random()),0,e),Object(O.a)({},e,{choices:n})})),r.next=15,Object(N.b)({type:"review-collection",status:"success",collection:Object(O.a)({},n.collection,{items:a}),cardIndex:0});case 15:case"end":return r.stop()}}),de)}function he(e){var t,n,c,a,r,o,l,s;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.answer,n=t.card,c=t.choice,a=n.id===c.id?{corrects:1}:{wrongs:1},i.next=4,ve("/me/scorecard/".concat(n.id),a);case 4:if((r=i.sent).ok){i.next=9;break}return i.next=8,Object(N.b)({type:"answer-match",status:"error",error:r.error});case 8:return i.abrupt("return");case 9:return i.next=11,Object(N.b)({type:"answer-match",status:"success",scorecard:Object(O.a)({},r.scorecard,{card:n,correct:n.id===c.id})});case 11:return i.next=13,Object(N.c)((function(e){return{reviewCollection:e.review.reviewCollection,cardIndex:e.review.cardIndex}}));case 13:if(o=i.sent,l=o.reviewCollection,!((s=o.cardIndex)<l.items.length-1)){i.next=21;break}return i.next=19,Object(N.b)({type:"review-card",status:"success",cardIndex:s+1});case 19:i.next=25;break;case 21:return i.next=23,Object(N.b)({type:"review-result",status:"success"});case 23:return i.next=25,Object(N.b)(Object(h.replace)("/review/result"));case 25:case"end":return i.stop()}}),me)}function Oe(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)((function(e){var t=e.type,n=e.status;return"review-collection"===t&&"pending"===n}),Ee);case 2:return e.next=4,Object(N.d)((function(e){var t=e.type,n=e.status;return"answer-match"===t&&"pending"===n}),he);case 4:case"end":return e.stop()}}),pe)}var je=C.a.mark(xe);function xe(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)([F(),se(),Oe()]);case 2:case"end":return e.stop()}}),je)}var ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({shouldHotReload:!1})||v.d,we=Object(E.a)(),ge=Object(h.routerMiddleware)(b);var ye=n(86),Ce=n(87),Ne=n(88),Ie=n(89),_e=Object(m.b)(null,(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=e.className,c=e.children;return a.a.createElement(ye.a,{className:n},a.a.createElement(Ce.a,null,a.a.createElement(Ne.a,null,a.a.createElement(Ie.a,{onClick:function(){return t(Object(h.replace)("/"))}},"Karteikarten")),c))})),Se=n(52),Le=n.n(Se),Me=Object(m.b)(null,(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch;return a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col-7 karteikarten-login"},a.a.createElement("h1",null,"Login"),a.a.createElement(Le.a,{approvalPrompt:"force",clientId:"166406152582-k33pgvfgfc0e4u0ujsgak5ps2ps66d46.apps.googleusercontent.com",scope:"profile email",onSuccess:function(e){return t({type:"login",status:"pending",authData:e})},onFailure:function(e){return t({type:"login",status:"error",authData:e})}}))))})),Pe=n(104),De=n(92),Fe=n(93),Re=n(91),ze=n(94),Ae=n(95),Te=n(53),Be=n(54),Ve=n(90),We=n(33),Ye=n(32),Je=function(e){var t=e.stats;return t.corrects_ratio>=.625?a.a.createElement(Ye.a,{icon:We.c,className:"text-success",title:"Correct ratio ".concat(100*t.corrects_ratio,"%")}):a.a.createElement(Ye.a,{icon:We.b,className:"text-warning",title:"Correct ratio ".concat(100*t.corrects_ratio,"%")})},Ke=function(e){var t=e.dispatch,n=e.collections,c=e.className;return a.a.createElement(Te.a,{className:c||"",flush:!0},n.map((function(e){return a.a.createElement(Be.a,{className:"pl-0 pr-0"},a.a.createElement("div",{className:"float-right"},e.stats&&a.a.createElement(Je,{stats:e.stats}),a.a.createElement(Ve.a,null,a.a.createElement(Re.a,{size:"sm",color:"link",onClick:function(){return t(Object(h.push)("/collections/".concat(e.id)))}},"View"),a.a.createElement(Re.a,{size:"sm",color:"link",onClick:function(){return t(Object(h.push)("/review/".concat(e.id)))}},"Review"))),a.a.createElement(a.a.Fragment,null,a.a.createElement(Ye.a,{icon:We.a})," ",e.title))})))};Ke.defaultProps={collections:[]};var Xe=Object(m.b)(null,(function(e){return{dispatch:e}}))(Ke),He=function(e){var t=e.dispatch,n=e.isLoading,r=e.collections;return Object(c.useEffect)((function(){t({type:"fetch-recent-collections",status:"pending"})}),[]),n?a.a.createElement("div",{className:"text-center"},"Loading..."):r.length?a.a.createElement(ze.a,null,a.a.createElement("h1",{className:"page-title"},"Dashboard"),a.a.createElement(Fe.a,null,a.a.createElement(Ae.a,{widths:[12]},a.a.createElement("h2",null,"Recent collections"),a.a.createElement(Xe,{collections:r})))):a.a.createElement(Pe.a,{isOpen:!0},a.a.createElement(De.a,null,a.a.createElement("p",{className:"display-4 text-center"},"Welcome to Karteikarten!"),a.a.createElement("p",null,"Let's create your first collection!"),a.a.createElement(Fe.a,{className:"justify-content-center"},a.a.createElement(Re.a,{color:"primary",onClick:function(){return t(Object(h.replace)("/create-collection"))}},"Let's go!"))))};He.defaultProps={isLoading:!0,collections:[]};var Ue=Object(m.b)((function(e){return{collections:e.coreData.collections,isLoading:e.network.busy}}),(function(e){return{dispatch:e}}))(He),$e=n(96),qe=n(97),Ge=Object(m.b)((function(e){return{newCollection:e.coreData.newCollection||void 0}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=e.newCollection,r=void 0===n?{id:null,title:""}:n,o=Object(p.e)(),l=Object(c.useState)(r),s=Object(ie.a)(l,2),i=s[0],u=s[1],d=Object(c.useState)({id:null,isPristine:!0,front:"",back:""}),m=Object(ie.a)(d,2),f=m[0],b=m[1];Object(c.useEffect)((function(){u(r)}),[r.id]),Object(c.useEffect)((function(){b({id:null,isPristine:!0,front:"",back:""})}),[r.id,r.items]);var v=o&&o.step||"step-0";return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12"},a.a.createElement("h1",{className:"page-title"},"Create Your Collection"),"step-0"===v&&a.a.createElement(Fe.a,null,a.a.createElement($e.a,{className:"col-form-label text-right col-3"},"Title"),a.a.createElement(qe.a,{className:"col-7 font-weight-bold",value:i.title,placeholder:"No name",onChange:function(e){var t=e.target.value;u(Object(O.a)({},r,{title:t}))}}),a.a.createElement("div",{className:"col-2"},a.a.createElement(Re.a,{color:"primary",onClick:function(){return t({type:"create-collection",status:"pending",collection:i})}},"Create"))),"step-1"===v&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Fe.a,null,a.a.createElement("ul",{className:"list-inline"},r.items&&r.items.map((function(e){return a.a.createElement("li",{className:"list-inline-item"},e.front)})))),a.a.createElement(Fe.a,null,a.a.createElement($e.a,{className:"col-form-label text-right col-3"},"Front"),a.a.createElement(qe.a,{className:"col-7 font-weight-bold",value:f.front,placeholder:"Empty",onChange:function(e){var t=e.target.value;b(Object(O.a)({},f,{isPristine:!1,front:t}))}})),a.a.createElement(Fe.a,{className:"pt-2"},a.a.createElement($e.a,{className:"col-form-label text-right col-3"},"Back"),a.a.createElement(qe.a,{className:"col-7 font-weight-bold",value:f.back,placeholder:"Empty",onChange:function(e){var t=e.target.value;b(Object(O.a)({},f,{back:t}))}})),a.a.createElement(Fe.a,{className:"justify-content-center pt-3"},a.a.createElement(Re.a,{color:"primary",onClick:function(){return t({type:"create-card-in-new-collection",status:"pending",collection:r,card:f})}},"Add to Collection"),a.a.createElement(Re.a,{color:"default",onClick:function(){return t(Object(h.replace)("/collections"))}},"Finish"))))))})),Qe=Object(m.b)((function(e){return{collections:e.coreData.collections||[]}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=e.collections;return Object(c.useEffect)((function(){t({type:"fetch-collections",status:"pending"})}),[]),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12"},a.a.createElement("h1",{className:"page-title"},"Your Collections"),a.a.createElement(Fe.a,{className:"justify-content-end pr-3"},a.a.createElement(Re.a,{color:"link",onClick:function(){return t(Object(h.push)("/create-collection"))}},"Create Collection")),a.a.createElement(Te.a,{className:"pt-3",flush:!0},n.map((function(e){return a.a.createElement(Be.a,{className:"pl-0 pr-0"},a.a.createElement(Ve.a,{className:"float-right"},a.a.createElement(Re.a,{size:"sm",color:"link",onClick:function(){return t(Object(h.push)("/collections/".concat(e.id)))}},"View"),a.a.createElement(Re.a,{size:"sm",color:"link",onClick:function(){return t(Object(h.push)("/review/".concat(e.id)))}},"Review")),e.title)}))))))})),Ze=n(102),et=n(99),tt=n(100),nt=n(98),ct=n(101),at=function(e){var t=e.card,n=e.onSave,r=e.onClose,o=Object(c.useState)(t),l=Object(ie.a)(o,2),s=l[0],i=l[1];return Object(c.useEffect)((function(){i(Object(O.a)({},t,{isPristine:!0}))}),[t]),a.a.createElement(Pe.a,{isOpen:!0},a.a.createElement(nt.a,null,"Card"),a.a.createElement(De.a,null,a.a.createElement(et.a,null,a.a.createElement(tt.a,{row:!0,inline:!0},a.a.createElement($e.a,{className:"col-form-label text-right col-3"},"Front"),a.a.createElement("div",{className:"col-9"},a.a.createElement(qe.a,{className:"font-weight-bold",value:s.front,placeholder:"Empty",onChange:function(e){var t=e.target.value;i(Object(O.a)({},s,{isPristine:!1,front:t}))}}))),a.a.createElement(tt.a,{row:!0,inline:!0},a.a.createElement($e.a,{className:"col-form-label text-right col-3"},"Back"),a.a.createElement("div",{className:"col-9"},a.a.createElement(qe.a,{className:"font-weight-bold",value:s.back,placeholder:"Empty",onChange:function(e){var t=e.target.value;i(Object(O.a)({},s,{isPristine:!1,back:t}))}}))))),a.a.createElement(ct.a,null,a.a.createElement(Re.a,{color:"default",onClick:function(){return r()}},"Cancel"),a.a.createElement(Re.a,{color:"primary",onClick:function(){return n(s)}},"Save")))};at.defaultProps={card:{isNew:!0}};var rt=at,ot=Object(m.b)(null,(function(e){return{dispatch:e}}))((function(e){e.dispatch;var t=e.card,n=e.onAccept,r=e.onClose,o=Object(c.useState)(null),l=Object(ie.a)(o,2),s=l[0],i=l[1],u=Object(c.useState)(null),d=Object(ie.a)(u,2),m=d[0],p=d[1],f=Object(c.useCallback)((function(){return _("http://localhost:8080/collections")}),[]),b=Object(c.useState)(null),v=Object(ie.a)(b,2),E=v[0],h=v[1];return a.a.createElement(Pe.a,{isOpen:!0},a.a.createElement(nt.a,null,a.a.createElement("span",{className:"font-italic"},t.front)),a.a.createElement(De.a,null,a.a.createElement(et.a,null,a.a.createElement(tt.a,{row:!0,inline:!0},a.a.createElement($e.a,{className:"col-3 col-form-label text-right"},"Action"),a.a.createElement("div",{className:"form-check-inline"},a.a.createElement("label",{className:"form-check-label"},a.a.createElement(qe.a,{type:"radio",className:"form-check-input",name:"action",onClick:function(){i("MOVE"),f().then((function(e){var t=e.collections;return p(t)}))}})," Move")),a.a.createElement("div",{className:"form-check-inline"},a.a.createElement("label",{className:"form-check-label"},a.a.createElement(qe.a,{type:"radio",className:"form-check-input",name:"action",onClick:function(){i("COPY"),f().then((function(e){var t=e.collections;return p(t)}))}})," Copy")),a.a.createElement("div",{className:"form-check-inline"},a.a.createElement("label",{className:"form-check-label"},a.a.createElement(qe.a,{type:"radio",className:"form-check-input",name:"action",onClick:function(){i("CLONE"),p(null)}})," Clone"))),m&&a.a.createElement(tt.a,null,a.a.createElement($e.a,null,"Move/Copy to..."),a.a.createElement("select",{className:"form-control",onChange:function(e){var t=e.target.value;return h(t)}},m.map((function(e){return a.a.createElement("option",{value:e.id},e.title)})))))),a.a.createElement(ct.a,null,a.a.createElement(Re.a,{color:"default",onClick:r},"Cancel"),a.a.createElement(Re.a,{color:"primary",onClick:function(){return n({action:s,cardId:t.id,collectionId:E})}},"OK")))})),lt=Object(m.b)((function(e){return{collection:e.coreData.editCollection||{id:null}}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=e.collection,r=Object(p.e)().collectionId,o=Object(c.useState)({}),l=Object(ie.a)(o,2),s=l[0],i=l[1],u=Object(c.useState)(!1),d=Object(ie.a)(u,2),m=d[0],f=d[1],b=Object(c.useState)(!1),v=Object(ie.a)(b,2),E=v[0],j=v[1],x=Object(c.useState)(null),k=Object(ie.a)(x,2),w=k[0],g=k[1],y=Object(c.useState)(!1),C=Object(ie.a)(y,2),N=C[0],I=C[1];return Object(c.useEffect)((function(){t({type:"view-collection",status:"pending",collectionId:r})}),[]),Object(c.useEffect)((function(){i(n),f(!1),j(!1),I(!1)}),[n]),s&&s.items?a.a.createElement(a.a.Fragment,null,a.a.createElement(ye.a,null,a.a.createElement(Ce.a,null,a.a.createElement(Ne.a,null,a.a.createElement(Ze.a,{href:"javascript: void 0",onClick:function(){return t(Object(h.replace)("/collections"))}},"\u2039 Collections")))),a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12"},a.a.createElement("h1",{className:"page-title"},"Your Collection"),a.a.createElement(et.a,null,a.a.createElement(tt.a,{row:!0,inline:!0},a.a.createElement($e.a,{className:"col-form-label text-right col-3"},"Title"),a.a.createElement("div",{className:"col-9"},a.a.createElement(qe.a,{className:"font-weight-bold",value:s.title,placeholder:"No name",onChange:function(e){var t=e.target.value;i(Object(O.a)({},s,{title:t}))},onBlur:function(){t({type:"update-collection",status:"pending",collection:s})}}))),a.a.createElement(tt.a,{row:!0,inline:!0},a.a.createElement($e.a,{className:"col-form-label text-right col-3"},"Cards"),a.a.createElement("div",{className:"col-9"},a.a.createElement(Te.a,null,(s.items||[]).map((function(e){return a.a.createElement(Be.a,{key:e.id,className:"pt-1 pb-1 pr-0"},a.a.createElement(Re.a,{className:"float-right",size:"sm",color:"default",onClick:function(){g(e),I(!0)}},"\u2026"),a.a.createElement(Re.a,{className:"float-right",size:"sm",color:"link",onClick:function(){g(e),j(!0)}},"View"),e.front)})))))),a.a.createElement(Fe.a,{className:"pt-3 justify-content-center"},a.a.createElement(Re.a,{color:"primary",onClick:function(){return f(!0)}},"Add new Card")))),m&&a.a.createElement(rt,{onClose:function(){return f(!1)},onSave:function(e){t({type:"create-card-in-collection",status:"pending",collection:s,card:e})}}),E&&w&&a.a.createElement(rt,{card:w,onClose:function(){return j(!1)},onSave:function(e){t({type:"update-card-in-collection",status:"pending",collection:s,card:e})}}),N&&w&&a.a.createElement(ot,{card:w,onClose:function(){return I(!1)},onAccept:function(e){var c=e.action,a=e.cardId,r=e.collectionId;"MOVE"===c?t({type:"move-card",status:"pending",cardId:a,fromCollectionId:n.id,toCollectionId:r}):"COPY"===c?t({type:"copy-card",status:"pending",cardId:a,toCollectionId:r}):"CLONE"===c&&t({type:"clone-card",status:"pending",cardId:a,toCollectionId:n.id})}}))):a.a.createElement("div",{className:"text-center"},"Loading...")})),st=n(103),it=Object(m.b)((function(e){return{collection:e.review.reviewCollection||{items:[]},cardIndex:e.review.cardIndex||0,lastScorecard:e.review.scorecards.length?e.review.scorecards[e.review.scorecards.length-1]:null,complete:e.review.complete,scorecards:e.review.scorecards}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,n=e.collection,r=e.cardIndex,o=void 0===r?0:r,l=e.lastScorecard,s=void 0===l?null:l,i=e.scorecards,u=void 0===i?null:i,d=e.complete,m=void 0!==d&&d,f=Object(p.e)().collectionId,b=Object(c.useState)({}),v=Object(ie.a)(b,2),E=v[0],O=v[1];return Object(c.useEffect)((function(){f&&t({type:"review-collection",status:"pending",collectionId:f})}),[f]),Object(c.useEffect)((function(){n&&n.items&&O(n.items[0])}),[n]),Object(c.useEffect)((function(){O(n.items[o])}),[n,o]),n&&E&&E.choices?a.a.createElement(a.a.Fragment,null,a.a.createElement(ye.a,null,a.a.createElement(Ce.a,null,a.a.createElement(Ne.a,null,a.a.createElement(Ze.a,{href:"javascript: void 0",onClick:function(){return t(Object(h.replace)("/collections"))}},"\u2039 Collections")))),a.a.createElement("div",{className:"container"},a.a.createElement(Fe.a,{className:"justify-content-center"},a.a.createElement("div",{className:"col-12 col-sm-10"},a.a.createElement("h1",{className:"page-title"},"Review"),s&&!m&&a.a.createElement(Fe.a,null,a.a.createElement($e.a,{className:"col-4"},"Last card"),a.a.createElement("div",{className:"col-4"},s.card.front),a.a.createElement("div",{className:"col-4"},s.correct?a.a.createElement("span",null,"Correct!"):a.a.createElement("span",null,"Wrong!!!"))),!m&&a.a.createElement("div",{className:"w-100 p-3 p-sm-5 karteikarten-card"},a.a.createElement("h3",{className:"display-4 mb-5 text-center font-weight-bold"},E.front),a.a.createElement(Fe.a,{key:E.id},E.choices.map((function(e){return a.a.createElement(Re.a,{onClick:function(){return t({type:"answer-match",status:"pending",answer:{card:E,choice:e}})},key:"".concat(E.id,"-").concat(e.id),color:"link",className:"w-50"},e.back)})))),m&&u&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"w-100 p-3 p-sm-5 karteikarten-card"},a.a.createElement("h2",null,n.title),a.a.createElement(st.a,{responsive:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null),a.a.createElement("th",null,"Correct"),a.a.createElement("th",null,"Wrong"),a.a.createElement("th",null,"Skipped"))),a.a.createElement("tbody",null,u.map((function(e){var t=e.card,n=Object(R.a)(e,["card"]);return a.a.createElement("tr",null,a.a.createElement("td",null,t.front),a.a.createElement("td",null,n.corrects),a.a.createElement("td",null,n.wrongs),a.a.createElement("td",null,n.skippeds))}))))),a.a.createElement("div",{className:"w-100 text-center"},a.a.createElement(Re.a,{color:"link",onClick:function(){return t(Object(h.replace)("/review/".concat(n.id)))}},"Retry the collection"))))))):a.a.createElement("div",{className:"text-center"},"Loading...")})),ut=function(){var e=Object(v.e)(g,ke(Object(v.a)(we,ge)));return we.run(xe),e}(),dt=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(m.a,{store:ut},a.a.createElement(p.c,{history:b},a.a.createElement(a.a.Fragment,null,a.a.createElement(_e,{className:"karteikarten-topnav"}),a.a.createElement(p.d,null,a.a.createElement(p.b,{path:"/",exact:!0,component:Ue}),a.a.createElement(p.b,{path:"/login",exact:!0,component:Me}),a.a.createElement(p.b,{path:"/create-collection",exact:!0,component:Ge}),a.a.createElement(p.b,{path:"/create-collection/:step",exact:!0,component:Ge}),a.a.createElement(p.b,{path:"/collections",exact:!0,component:Qe}),a.a.createElement(p.b,{path:"/collections/:collectionId",exact:!0,component:lt}),a.a.createElement(p.b,{path:"/review/result",exact:!0,component:it}),a.a.createElement(p.b,{path:"/review/:collectionId",exact:!0,component:it}),a.a.createElement(p.a,{to:"/"})))))}}]),t}(c.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.02ef612b.chunk.js.map